<html lang="en">

    <head>
    <meta charset="utf-8">

    <title>Your Accounts</title>

    </head>

    <body style="padding: 10%">
        <h1>Your Accounts</h1>
        <hr>
        <div id="balances"></div>
    </body>

    <script>
        "use strict";
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                myFunction(this);
            }
        };
        xhttp.open("GET", "/accountdata", true);
        xhttp.send();
        
        function myFunction(xml) {
            var xmlDoc = xml.responseXML;

            // console.log(xmlDoc);
            
            var tags = xmlDoc.getElementsByTagName('*');
            for (let i = 1; i < tags.length; (i+=2)) {

                let node = document.createElement("div");

                node.innerHTML += "<h2>" + tags[i].firstChild.nodeValue + "</h2>"; 
                node.innerHTML += "<br><strong>Balance: </strong>" + tags[i+1].firstChild.nodeValue + "<br><br>";
                document.getElementById("balances").appendChild(node);
                
                let withdrawFormNode = document.createElement("form");
                withdrawFormNode.action = "/withdraw";
                withdrawFormNode.method = "POST";
                withdrawFormNode.innerHTML += '<input type="number" min="0.00" step="0.01" name="amount" id="account">';
                withdrawFormNode.innerHTML += '<input type="submit" value="Withdraw">';
                document.getElementById("balances").appendChild(withdrawFormNode);

                let depositFormNode = document.createElement("form");
                depositFormNode.action = "/deposit";
                depositFormNode.method = "POST";
                depositFormNode.innerHTML += '<input type="number" min="0.00" step="0.01" name="amount" id="account">';
                depositFormNode.innerHTML += '<input type="submit" value="Deposit"><br><br><hr>';
                document.getElementById("balances").appendChild(depositFormNode);
            }
        }
    </script>

</html>